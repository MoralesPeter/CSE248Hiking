package model;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStreamReader;

public class Utilities {
	
	public static boolean authenticateUser(String username, String password, UserStorage userStorage) {
		if(userStorage.containsUser(username)) {
			User u = userStorage.searchUser(username);
			if(password.equals(u.getPassword()) && u.isActive()) {
				return true;
			}
		}
		return false;
	}
	
	public static String emitUsername(String firstNameFileName, String lastNameFileName) throws IOException {
		
		File fileFirst = new File(firstNameFileName);
		File fileLast = new File(lastNameFileName);
		String [] firstNames = new String[2000];
		String [] lastNames = new String[2000];
		
		BufferedReader br1 = new BufferedReader(new InputStreamReader(new FileInputStream(fileFirst)));
	    BufferedReader br2 = new BufferedReader(new InputStreamReader(new FileInputStream(fileLast)));
	    String firstLine = null;
	    String lastLine = null;
	    int i = 0;
	    while((firstLine = br1.readLine())!= null && (lastLine = br2.readLine())!= null) {
	    	firstNames[i] = firstLine;
	    	lastNames[i] = lastLine;
			i++;
	    	}
		
		//get random name
		int firstIndex = (int)(Math.random() * firstNames.length);
		int lastIndex = (int)(Math.random() * lastNames.length);
		
		br1.close();
	    br2.close();
		return (firstNames[firstIndex] + lastNames[lastIndex]);
	}
}
